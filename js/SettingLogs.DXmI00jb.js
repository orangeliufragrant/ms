import{ad as e,c as a,l,w as t,a4 as s,a3 as o,aB as i,au as d}from"./index.fjkLwUVu.js";import{E as m}from"./el-row.CR2lAonX.js";import{E as r,a as n}from"./el-form-item.LUBrM-X2.js";import{E as u}from"./el-col.Asb1dzXh.js";import{E as h}from"./el-switch.CZooYmGS.js";import{s as f}from"./screen-height.CaLnsKT6.js";import{l as g,g as p}from"./setting.Ym5MVI_R.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.BF9loTbA.js";import"./_Uint8Array.BeplMWlC.js";import"./tagsView.DWSC-EGY.js";const c=_({name:"SystemSettingLog",data:()=>({name:"日志设置",height:680,loading:!1,model:{log_switch:0,log_save_time:0},rules:{}}),created(){this.height=f(210),this.info()},methods:{info(){g().then((e=>{this.model=e.data}))},refresh(){this.loading=!0,g().then((a=>{this.model=a.data,this.loading=!1,e.success(a.msg)})).catch((()=>{this.loading=!1}))},submit(){this.$refs.ref.validate((a=>{a&&(this.loading=!0,p(this.model).then((a=>{this.loading=!1,e.success(a.msg)})).catch((()=>{this.loading=!1})))}))}}},[["render",function(e,f,g,p,_,c){const j=h,v=u,w=r,V=i,b=d,y=n,x=m;return a(),l(x,null,{default:t((()=>[s(v,{span:16},{default:t((()=>[s(y,{ref:"ref",model:_.model,rules:_.rules,"label-width":"120px"},{default:t((()=>[s(w,{label:"日志记录开关",prop:"log_switch"},{default:t((()=>[s(v,{span:8},{default:t((()=>[s(j,{modelValue:_.model.log_switch,"onUpdate:modelValue":f[0]||(f[0]=e=>_.model.log_switch=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),s(v,{span:16},{default:t((()=>f[4]||(f[4]=[o(" 开启后，会记录后台用户日志。 ")]))),_:1})])),_:1}),s(w,{label:"日志保留时间",prop:"log_save_time"},{default:t((()=>[s(v,{span:8},{default:t((()=>[s(V,{modelValue:_.model.log_save_time,"onUpdate:modelValue":f[1]||(f[1]=e=>_.model.log_save_time=e),type:"number"},{append:t((()=>f[5]||(f[5]=[o("天")]))),_:1},8,["modelValue"])])),_:1}),s(v,{span:16},{default:t((()=>f[6]||(f[6]=[o(" 用户日志保留天数，0永久保留。 ")]))),_:1})])),_:1}),s(w,null,{default:t((()=>[s(b,{loading:_.loading,onClick:f[2]||(f[2]=e=>c.refresh())},{default:t((()=>f[7]||(f[7]=[o("刷新")]))),_:1},8,["loading"]),s(b,{loading:_.loading,type:"primary",onClick:f[3]||(f[3]=e=>c.submit())},{default:t((()=>f[8]||(f[8]=[o("提交")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}]]);export{c as default};
