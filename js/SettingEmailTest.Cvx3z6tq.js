import{ad as e,c as t,l,w as a,a4 as i,a3 as m,aA as o,aB as s,au as n}from"./index.fjkLwUVu.js";import{E as r}from"./el-row.CR2lAonX.js";import{E as d,a as _}from"./el-form-item.LUBrM-X2.js";import{E as u}from"./el-col.Asb1dzXh.js";import{c}from"./setting.BgHcpkHr.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.BF9loTbA.js";import"./_Uint8Array.BeplMWlC.js";const h=p({name:"SettingEmailTest",data:()=>({name:"邮件测试",loading:!1,model:{email_recipient:"",email_theme:"",email_content:""},rules:{email_recipient:[{required:!0,message:"请输入收件人",trigger:"blur"}],email_theme:[{required:!0,message:"请输入主题",trigger:"blur"}],email_content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}),created(){this.default("get")},methods:{default(e="get"){const t=o.storePrefix;"set"==e?(localStorage.setItem(t+"email_recipient",this.model.email_recipient),localStorage.setItem(t+"email_theme",this.model.email_theme),localStorage.setItem(t+"email_content",this.model.email_content)):(this.model.email_recipient=localStorage.getItem(t+"email_recipient"),this.model.email_theme=localStorage.getItem(t+"email_theme"),this.model.email_content=localStorage.getItem(t+"email_content"),this.model.email_theme||(this.model.email_theme="测试邮件"),this.model.email_content||(this.model.email_content="这是一封测试邮件，收到此邮件说明邮件设置和发送正常。"))},reset(){this.loading=!0,this.model.email_recipient="",this.model.email_theme="",this.model.email_content="",this.loading=!1},submit(){this.$refs.ref.validate((t=>{this.default("set"),t&&(this.loading=!0,c(this.model).then((t=>{this.loading=!1,e.success(t.msg)})).catch((()=>{this.loading=!1})))}))}}},[["render",function(e,o,c,p,h,g){const f=s,b=u,x=d,V=n,j=_,y=r;return t(),l(y,null,{default:a((()=>[i(b,{span:16},{default:a((()=>[i(j,{ref:"ref",model:h.model,rules:h.rules,"label-width":"120px"},{default:a((()=>[i(x,{label:"收件人",prop:"email_recipient"},{default:a((()=>[i(b,{span:8},{default:a((()=>[i(f,{modelValue:h.model.email_recipient,"onUpdate:modelValue":o[0]||(o[0]=e=>h.model.email_recipient=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),i(b,{span:16},{default:a((()=>o[5]||(o[5]=[m(" 邮箱地址 ")]))),_:1})])),_:1}),i(x,{label:"主题",prop:"email_theme"},{default:a((()=>[i(b,{span:8},{default:a((()=>[i(f,{modelValue:h.model.email_theme,"onUpdate:modelValue":o[1]||(o[1]=e=>h.model.email_theme=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),i(b,{span:16},{default:a((()=>o[6]||(o[6]=[m(" 邮件主题 ")]))),_:1})])),_:1}),i(x,{label:"内容",prop:"email_content"},{default:a((()=>[i(b,{span:8},{default:a((()=>[i(f,{modelValue:h.model.email_content,"onUpdate:modelValue":o[2]||(o[2]=e=>h.model.email_content=e),type:"textarea",autosize:{minRows:4,maxRows:10}},null,8,["modelValue"])])),_:1}),i(b,{span:16},{default:a((()=>o[7]||(o[7]=[m(" 邮件内容 ")]))),_:1})])),_:1}),i(x,null,{default:a((()=>[i(V,{loading:h.loading,onClick:o[3]||(o[3]=e=>g.reset())},{default:a((()=>o[8]||(o[8]=[m("重置")]))),_:1},8,["loading"]),i(V,{loading:h.loading,type:"primary",onClick:o[4]||(o[4]=e=>g.submit())},{default:a((()=>o[9]||(o[9]=[m("发送")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}]]);export{h as default};
