import{ad as e,ao as l,c as i,l as o,w as t,a4 as a,a3 as s,aB as d,au as m}from"./index.fjkLwUVu.js";import"./el-scrollbar.DAmtYv6U.js";import{E as r}from"./el-row.CR2lAonX.js";import{E as n,a as g}from"./el-form-item.LUBrM-X2.js";import{E as p}from"./el-switch.CZooYmGS.js";import{E as u}from"./el-text.BpgAV3tu.js";import{E as _}from"./el-color-picker.D-6QTkDl.js";import{_ as f}from"./FileImage.CNK6_fwR.js";import{E as h}from"./el-col.Asb1dzXh.js";import{s as c}from"./screen-height.CaLnsKT6.js";import{h as j,i as b}from"./setting.Ym5MVI_R.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as V}from"./index.CC5uJ0zJ.js";import"./castArray.BF9loTbA.js";import"./_Uint8Array.BeplMWlC.js";import"./el-popper.DZg10sPd.js";import"./index.BAnbBVvD.js";import"./el-image-viewer.CKIWDlAT.js";import"./strings.BFjoWW54.js";import"./index.BIv6f7sb.js";import"./el-dialog.BQ-7T3N1.js";import"./refs.A9PVpu8F.js";import"./el-avatar.CztSEU-_.js";import"./index.Ca7HhsrZ.js";import"./index.CZvH84Pk.js";import"./el-loading.DGjIZa5s.js";import"./index.uvQ3DMPv.js";import"./el-select.Dphl92Bb.js";import"./isEqual.C9MgJhLZ.js";import"./el-table-column.CcJDJdsG.js";import"./el-checkbox.Bx2MqeyX.js";import"./raf.CCooGNZO.js";import"./el-tooltip.l0sNRNKZ.js";import"./FilePreview.ysv9CpFr.js";import"./index.DKis4amu.js";/* empty css                          */import"./el-progress.C11kH2od.js";import"./cloneDeep.CpzyAp_h.js";import"./el-card.DQc9Ri4s.js";import"./el-link.Ds1J_vSa.js";/* empty css                       */import"./el-date-picker.CuOHw7o_.js";import"./permission.6opTfbBv.js";import"./group.Dp74GP4K.js";import"./tag.C6qLWou5.js";import"./index.D1QADgj8.js";import"./tagsView.DWSC-EGY.js";const y=v({name:"SystemSettingSystem",data:()=>({name:"系统设置",loading:!1,height:680,model:{system_name:"",page_title:"",favicon_id:0,favicon_url:"",logo_id:0,logo_url:"",login_bg_id:0,login_bg_url:"",login_bg_color:"",page_limit:20,is_watermark:0}}),created(){this.height=c(210),this.info()},methods:{info(){j().then((e=>{this.model=e.data,this.setting(this.model)}))},refresh(){this.loading=!0,j().then((l=>{this.model=l.data,this.loading=!1,e.success(l.msg)})).catch((()=>{this.loading=!1}))},submit(){this.$refs.ref.validate((l=>{l&&(this.loading=!0,b(this.model).then((l=>{this.setting(this.model),this.loading=!1,e.success(l.msg)})).catch((()=>{this.loading=!1})))}))},setting(e){const i=l();i.changeSetting({key:"loginBgUrl",value:e.login_bg_url}),i.changeSetting({key:"loginBgColor",value:e.login_bg_color}),i.changeSetting({key:"systemName",value:e.system_name}),i.changeSetting({key:"pageTitle",value:e.page_title}),i.changeSetting({key:"faviconUrl",value:e.favicon_url}),i.changeSetting({key:"logoUrl",value:e.logo_url}),i.changeSetting({key:"pageLimit",value:e.page_limit}),i.changeSetting({key:"watermarkEnabled",value:e.is_watermark})},fileUpload(e,l=""){this.fileField=e,this.fileTitle=l,this.fileDialog=!0},fileCancel(){this.fileDialog=!1},fileSubmit(e){this.fileDialog=!1;const l=this.fileField,i=e.length;if(i){const o=i-1;"favicon"===l?(this.model.favicon_id=e[o].file_id,this.model.favicon_url=e[o].file_url):"logo"===l?(this.model.logo_id=e[o].file_id,this.model.logo_url=e[o].file_url):"login_bg"===l&&(this.model.login_bg_id=e[o].file_id,this.model.login_bg_url=e[o].file_url)}},fileDelete(e=""){"favicon"===e?(this.model.favicon_id=0,this.model.favicon_url=""):"logo"===e?(this.model.logo_id=0,this.model.logo_url=""):"login_bg"===e&&(this.model.login_bg_id=0,this.model.login_bg_url="")},loginBgColorChange(e){l().changeSetting({key:"loginBgColor",value:e})}}},[["render",function(e,l,c,j,b,v){const y=d,k=h,x=n,C=f,E=_,S=u,U=p,w=m,B=g,D=r,F=V;return i(),o(F,{native:"",height:b.height},{default:t((()=>[a(D,null,{default:t((()=>[a(k,{span:16},{default:t((()=>[a(B,{ref:"ref",model:b.model,"label-width":"120px"},{default:t((()=>[a(x,{label:"* 系统简称",prop:"system_name"},{default:t((()=>[a(k,{span:8},{default:t((()=>[a(y,{modelValue:b.model.system_name,"onUpdate:modelValue":l[0]||(l[0]=e=>b.model.system_name=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),a(k,{span:16},{default:t((()=>l[10]||(l[10]=[s(" 侧边栏、登录页显示。")]))),_:1})])),_:1}),a(x,{label:"* 页面标题",prop:"page_title"},{default:t((()=>[a(k,{span:8},{default:t((()=>[a(y,{modelValue:b.model.page_title,"onUpdate:modelValue":l[1]||(l[1]=e=>b.model.page_title=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),a(k,{span:16},{default:t((()=>l[11]||(l[11]=[s(" 浏览器页面标题后缀。 ")]))),_:1})])),_:1}),a(x,{label:"网页图标",prop:"favicon_id"},{default:t((()=>[a(C,{modelValue:b.model.favicon_id,"onUpdate:modelValue":l[2]||(l[2]=e=>b.model.favicon_id=e),"file-url":b.model.favicon_url,"file-title":"上传favicon","file-tip":"图片小于 50 KB，jpg、png、ico格式，128 x 128。",height:50,upload:""},null,8,["modelValue","file-url"])])),_:1}),a(x,{label:"系统logo",prop:"logo_id"},{default:t((()=>[a(C,{modelValue:b.model.logo_id,"onUpdate:modelValue":l[3]||(l[3]=e=>b.model.logo_id=e),"file-url":b.model.logo_url,"file-title":"上传logo","file-tip":"图片小于 200 KB，jpg、png格式，150 x 150。",height:100,upload:""},null,8,["modelValue","file-url"])])),_:1}),a(x,{label:"登录背景图",prop:"login_bg_id"},{default:t((()=>[a(C,{modelValue:b.model.login_bg_id,"onUpdate:modelValue":l[4]||(l[4]=e=>b.model.login_bg_id=e),"file-url":b.model.login_bg_url,"file-title":"上传登录背景图","file-tip":"图片小于 200 KB，jpg、png格式，1920 x 1080。",height:100,upload:""},null,8,["modelValue","file-url"])])),_:1}),a(x,{label:"登录背景色"},{default:t((()=>[a(k,{span:8},{default:t((()=>[a(E,{modelValue:b.model.login_bg_color,"onUpdate:modelValue":l[5]||(l[5]=e=>b.model.login_bg_color=e),predefine:["#2d3a4b","#2C8AFF","#1C2D56","#121E56","#079583","#09AEC2","#5F45CD","#E10E2D"],onChange:v.loginBgColorChange},null,8,["modelValue","onChange"])])),_:1}),a(k,{span:16},{default:t((()=>[a(S,{size:"default"},{default:t((()=>l[12]||(l[12]=[s("登录页面背景颜色。")]))),_:1})])),_:1})])),_:1}),a(x,{label:"分页每页数量",prop:"page_limit"},{default:t((()=>[a(k,{span:8},{default:t((()=>[a(y,{modelValue:b.model.page_limit,"onUpdate:modelValue":l[6]||(l[6]=e=>b.model.page_limit=e),type:"number"},null,8,["modelValue"])])),_:1}),a(k,{span:16},{default:t((()=>[a(S,{size:"default"},{default:t((()=>l[13]||(l[13]=[s("分页每页默认显示数量。")]))),_:1})])),_:1})])),_:1}),a(x,{label:"页面水印",prop:"is_watermark"},{default:t((()=>[a(k,{span:8},{default:t((()=>[a(U,{modelValue:b.model.is_watermark,"onUpdate:modelValue":l[7]||(l[7]=e=>b.model.is_watermark=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),a(k,{span:16},{default:t((()=>[a(S,{size:"default"},{default:t((()=>l[14]||(l[14]=[s("开启后页面会显示水印。")]))),_:1})])),_:1})])),_:1}),a(x,null,{default:t((()=>[a(w,{loading:b.loading,onClick:l[8]||(l[8]=e=>v.refresh())},{default:t((()=>l[15]||(l[15]=[s("刷新")]))),_:1},8,["loading"]),a(w,{loading:b.loading,type:"primary",onClick:l[9]||(l[9]=e=>v.submit())},{default:t((()=>l[16]||(l[16]=[s("提交")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1},8,["height"])}]]);export{y as default};
