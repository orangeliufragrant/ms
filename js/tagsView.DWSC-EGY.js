import{bc as e,r as i}from"./index.fjkLwUVu.js";const n=e("tagsView",(()=>{const e=i([]),n=i([]);function a(i){e.value.some((e=>e.fullPath===i.fullPath))||(i.affix?e.value.unshift(i):e.value.push(i))}function t(e){const i=e.name;n.value.includes(i)||e.keepAlive&&n.value.push(i)}function u(i){return new Promise((n=>{for(const[a,t]of e.value.entries())if(t.path===i.path){e.value.splice(a,1);break}n([...e.value])}))}function l(e){const i=e.name;return new Promise((e=>{const a=n.value.indexOf(i);a>-1&&n.value.splice(a,1),e([...n.value])}))}function s(i){return new Promise((n=>{e.value=e.value.filter((e=>e?.affix||e.path===i.path)),n([...e.value])}))}function r(e){const i=e.name;return new Promise((e=>{const a=n.value.indexOf(i);n.value=a>-1?n.value.slice(a,a+1):[],e([...n.value])}))}return{visitedViews:e,cachedViews:n,addVisitedView:a,addCachedView:t,delVisitedView:u,delCachedView:l,delOtherVisitedViews:s,delOtherCachedViews:r,updateVisitedView:function(i){for(let n of e.value)if(n.path===i.path){n=Object.assign(n,i);break}},addView:function(e){a(e),t(e)},delView:function(i){return new Promise((a=>{u(i),l(i),a({visitedViews:[...e.value],cachedViews:[...n.value]})}))},delOtherViews:function(i){return new Promise((a=>{s(i),r(i),a({visitedViews:[...e.value],cachedViews:[...n.value]})}))},delLeftViews:function(i){return new Promise((a=>{const t=e.value.findIndex((e=>e.path===i.path));-1!==t&&(e.value=e.value.filter(((e,i)=>{if(i>=t||e?.affix)return!0;const a=n.value.indexOf(e.name);return a>-1&&n.value.splice(a,1),!1})),a({visitedViews:[...e.value]}))}))},delRightViews:function(i){return new Promise((n=>{const a=e.value.findIndex((e=>e.path===i.path));-1!==a&&(e.value=e.value.filter(((e,i)=>{if(i<=a||e?.affix)return!0})),n({visitedViews:[...e.value]}))}))},delAllViews:function(){return new Promise((i=>{const a=e.value.filter((e=>e?.affix));e.value=a,n.value=[],i({visitedViews:[...e.value],cachedViews:[...n.value]})}))},delAllVisitedViews:function(){return new Promise((i=>{const n=e.value.filter((e=>e?.affix));e.value=n,i([...e.value])}))},delAllCachedViews:function(){return new Promise((e=>{n.value=[],e([...n.value])}))}}}));export{n as u};
