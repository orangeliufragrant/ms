import{c as t,l as e,w as a,k as i,O as s,e as o,Q as n,ah as l,a4 as r,t as d,ap as h}from"./index.fjkLwUVu.js";import{v as p}from"./el-loading.DGjIZa5s.js";import"./el-scrollbar.DAmtYv6U.js";import{E as m}from"./el-date-picker.CuOHw7o_.js";import"./el-popper.DZg10sPd.js";import{a as c,E as g}from"./el-select.Dphl92Bb.js";import{E as _}from"./el-row.CR2lAonX.js";import{E as u}from"./el-col.Asb1dzXh.js";import{E as y}from"./el-card.DQc9Ri4s.js";import{E as f}from"./el-statistic.CwS4mGA4.js";import{s as x}from"./screen-height.CaLnsKT6.js";import{s as k}from"./member.uE2K3zwp.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as j}from"./index.CC5uJ0zJ.js";import{L as v,M as D,N as C,O as M,Q as E}from"./installCanvasRenderer.CjTjctnq.js";import{i as b,a as Y}from"./install.Bt2A2NLk.js";import{i as $,a as T}from"./install.CUjPGuYv.js";import{i as V}from"./install.CFiJPaIc.js";import"./strings.BFjoWW54.js";import"./index.BIv6f7sb.js";import"./isEqual.C9MgJhLZ.js";import"./_Uint8Array.BeplMWlC.js";import"./index.BAnbBVvD.js";import"./castArray.BF9loTbA.js";import"./tagsView.DWSC-EGY.js";v([b,$,D,V,T,C,Y,M]);const A={class:"app-container"},O={class:"text-center"},S=["title"],U=["id"];const I=w({name:"MemberStatistic",data:()=>({name:"会员统计",height:680,loading:!1,count:[],echart_id:"echartid",echart_num:1,echart_data:[],date_type:"day",date_range:[],date_options:{},date_ptype:"monthrange",date_format:"YYYY-MM",picker_options_day:{shortcuts:[{text:"最近7天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-5184e5),t.$emit("pick",[a,e])}},{text:"最近30天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-25056e5),t.$emit("pick",[a,e])}},{text:"最近90天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-76896e5),t.$emit("pick",[a,e])}},{text:"最近120天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-102816e5),t.$emit("pick",[a,e])}}]},picker_options_month:{shortcuts:[{text:"最近3个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-2),t.$emit("pick",[a,e])}},{text:"最近6个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-5),t.$emit("pick",[a,e])}},{text:"最近9个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-8),t.$emit("pick",[a,e])}},{text:"最近12个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-11),t.$emit("pick",[a,e])}}]}}),watch:{echart_data(){this.$nextTick((()=>{this.setEchart()}))}},created(){this.height=x(140),this.statistic()},methods:{statistic(){this.loading=!0,k({type:this.date_type,date:this.date_range}).then((t=>{this.count=t.data.count,this.echart_data=t.data.echart,this.echart_num=t.data.echart.length,this.dateOptions(),this.loading=!1})).catch((()=>{this.loading=!1}))},typeChange(){this.dateOptions(),this.date_range=[]},dateOptions(){const t=this.date_type;"day"===t?(this.date_ptype="daterange",this.date_format="YYYY-MM-DD",this.date_options=this.picker_options_day):"month"===t&&(this.date_ptype="monthrange",this.date_format="YYYY-MM",this.date_options=this.picker_options_month)},dateChange(){this.statistic()},setEchart(){const t=this.echart_data,e=this.echart_num,a=this.echart_id;for(let i=0;i<e;i++)this.initEchart(t[i],a+i),this.date_type=t[i].type,this.date_range=t[i].date},initEchart(t,e){var a=E(document.getElementById(e)),i={title:{text:t.title,textStyle:{fontSize:12}},legend:{top:"20px",data:t.legend,selected:{"总数":!1}},grid:{top:"80px",left:"1%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t.xAxis},yAxis:{type:"value"},tooltip:{trigger:"axis",textStyle:{align:"left"}},toolbox:{feature:{magicType:{show:!0,type:["line","bar"]},dataView:{show:!0,readOnly:!0},saveAsImage:{show:!0,name:this.name+t.date[0]+"-"+t.date[1]}}},series:t.series};a.setOption(i)}}},[["render",function(x,k,w,v,D,C){const M=f,E=y,b=u,Y=_,$=c,T=g,V=m,I=j,q=p;return t(),e(I,{native:"",height:D.height},{default:a((()=>[i("div",A,[s((t(),e(Y,{gutter:10},{default:a((()=>[(t(!0),o(n,null,l(D.count,((s,o)=>(t(),e(b,{key:o,xs:24,span:3},{default:a((()=>[r(E,{"body-style":{padding:"10px 0px"},shadow:"never"},{header:a((()=>[i("div",O,[i("span",null,d(s.name),1)])])),default:a((()=>[i("div",{class:"text-center",title:s.title},[r(M,{value:s.count},null,8,["value"])],8,S)])),_:2},1024)])),_:2},1024)))),128))])),_:1})),[[q,D.loading]]),(t(!0),o(n,null,l(D.echart_num,((o,n)=>s((t(),e(E,{key:n,class:"mt-[10px]",shadow:"never"},{default:a((()=>[r(Y,{class:"text-center"},{default:a((()=>[r(b,null,{default:a((()=>[r(T,{modelValue:D.date_type,"onUpdate:modelValue":k[0]||(k[0]=t=>D.date_type=t),class:"!w-[100px]",onChange:C.typeChange},{default:a((()=>[r($,{label:x.$t("common.day"),value:"day"},null,8,["label"]),r($,{label:x.$t("common.month"),value:"month"},null,8,["label"])])),_:1},8,["modelValue","onChange"]),r(V,{modelValue:D.date_range,"onUpdate:modelValue":k[1]||(k[1]=t=>D.date_range=t),type:D.date_ptype,"value-format":D.date_format,"picker-options":D.date_options,"start-placeholder":x.$t("common.Start date"),"end-placeholder":x.$t("common.End date"),onChange:C.dateChange},null,8,["modelValue","type","value-format","picker-options","start-placeholder","end-placeholder","onChange"])])),_:1}),r(b,null,{default:a((()=>[i("div",{id:D.echart_id+n,style:h({height:D.height-300+"px"})},null,12,U)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[q,D.loading]]))),128))])])),_:1},8,["height"])}]]);export{I as default};
