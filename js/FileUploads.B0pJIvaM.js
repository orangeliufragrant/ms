import{r as e,K as l,D as t,c as i,l as a,w as s,a4 as o,a3 as r,t as n,e as u,Q as f,ah as d,g as p,ap as c,k as y,bU as m,au as _}from"./index.fjkLwUVu.js";import{E as h}from"./el-dialog.BQ-7T3N1.js";import{E as g}from"./el-row.CR2lAonX.js";import{E as v}from"./el-link.Ds1J_vSa.js";import{E as k}from"./el-image-viewer.CKIWDlAT.js";import{_ as w}from"./index.Ca7HhsrZ.js";import{E as x}from"./el-col.Asb1dzXh.js";import{E as j}from"./el-text.BpgAV3tu.js";import{F as z}from"./index.CZvH84Pk.js";import{c as C}from"./index.DKis4amu.js";const b=["src"],T=["data"],V=["src"],E=["src"],S=["src"],B={key:3},F={key:4},U={__name:"FileUploads",props:{modelValue:{type:[Array,Object],default:()=>[]},fileType:{type:String,default:"all"},fileTitle:{type:String,default:""},fileTip:{type:String,default:""},height:{type:Number,default:100},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},uploadBtn:{type:String,default:"上传文件"},deleteBtn:{type:String,default:"全部删除"}},emits:["update:modelValue"],setup(U,{emit:A}){const O=U,D=e([]),G=e(!1),K=A;l((()=>O.modelValue),(e=>{D.value=e}),{immediate:!0});const N=t((()=>({height:O.height+"px"}))),P=t((()=>({width:"90%"}))),Q=t((()=>.7*O.height+"px"));function q(e){return e.file_name+"."+e.file_ext}function H(){G.value=!1}function I(e){G.value=!1;const l=e.length;if(l){for(let t=0;t<l;t++)D.value.push(e[t]);K("update:modelValue",D)}}function J(e,l="right"){const t=D.value.length;var i=e;if("left"===l){if(e<=0)return!1;--i}else{if(e>=t-1)return!1;++i}const a=D.value[e],s=D.value[i];D.value[e]=s,D.value[i]=a}function L(e){"all"===e?D.value=[]:D.value.splice(e,1)}return(e,l)=>{const t=j,A=x,O=_,K=w,M=k,R=v,W=g,X=h;return i(),a(W,{style:{width:"100%"}},{default:s((()=>[o(A,{span:12},{default:s((()=>[o(t,{size:"default",truncated:"",title:U.fileTip},{default:s((()=>[r(n(U.fileTip),1)])),_:1},8,["title"])])),_:1}),o(A,{span:12},{default:s((()=>[o(O,{onClick:l[0]||(l[0]=e=>{G.value=!0})},{default:s((()=>[r(n(U.uploadBtn),1)])),_:1}),o(O,{onClick:l[1]||(l[1]=e=>L("all"))},{default:s((()=>[r(n(U.deleteBtn),1)])),_:1})])),_:1}),(i(!0),u(f,null,d(p(D),((e,l)=>(i(),a(A,{key:l,span:6},{default:s((()=>[o(W,{class:"file-row"},{default:s((()=>[o(A,{style:c({height:U.height+"px"})},{default:s((()=>["image"===e.file_type?(i(),a(M,{key:0,style:c({height:U.height+"px"}),src:e.file_url,fit:U.fit,"preview-src-list":[e.file_url],lazy:U.lazy,title:"点击看大图"},{error:s((()=>[o(K,{"icon-class":"picture"})])),_:2},1032,["style","src","fit","preview-src-list","lazy"])):"video"===e.file_type?(i(),u("video",{key:1,style:c(p(N)),controls:""},[y("source",{src:e.file_url,type:"video/mp4"},null,8,b),y("object",{data:e.file_url,style:c(p(N))},[y("embed",{src:e.file_url,style:c(p(N))},null,12,V)],12,T)],4)):"audio"===e.file_type?(i(),u("audio",{key:2,style:c(p(P)),controls:""},[y("source",{src:e.file_url,type:"audio/mp3"},null,8,E),y("embed",{src:e.file_url,style:c(p(P))},null,12,S)],4)):"word"===e.file_type?(i(),u("div",B,[o(K,{"icon-class":"document",size:p(Q)},null,8,["size"])])):(i(),u("div",F,[o(K,{"icon-class":"folder",size:p(Q)},null,8,["size"])]))])),_:2},1032,["style"]),o(A,{style:{"max-height":"40px"}},{default:s((()=>[o(t,{size:"default",truncated:"",title:q(e)},{default:s((()=>[r(n(q(e)),1)])),_:2},1032,["title"])])),_:2},1024),o(A,{style:{"max-height":"40px"}},{default:s((()=>[o(R,{class:"file-link",type:"primary",underline:!1,title:"向左移动",onClick:e=>J(l,"left")},{default:s((()=>[o(K,{"icon-class":"d-arrow-left"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"向左移动",onClick:e=>J(l,"right")},{default:s((()=>[o(K,{"icon-class":"d-arrow-right"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"下载",onClick:l=>{return C(q(t=e),"文件名复制成功"),void setTimeout((()=>{window.open(t.file_url,"_blank")}),500);var t}},{default:s((()=>[o(K,{"icon-class":"download"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"删除",onClick:e=>L(l)},{default:s((()=>[o(K,{"icon-class":"delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),o(X,{modelValue:p(G),"onUpdate:modelValue":l[2]||(l[2]=e=>m(G)?G.value=e:null),title:U.fileTitle?U.fileTitle:U.uploadBtn,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:s((()=>[o(z,{"file-type":U.fileType,onFileCancel:H,onFileSubmit:I},null,8,["file-type"])])),_:1},8,["modelValue","title"])])),_:1})}}};export{U as _};
