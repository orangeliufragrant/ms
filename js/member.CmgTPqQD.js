import{ad as e,ae as l,c as a,e as t,a4 as i,w as o,Q as s,ah as d,l as r,a3 as u,ac as n,t as m,O as p,P as c,k as h,aB as g,au as _}from"./index.fjkLwUVu.js";import{v as f}from"./el-loading.DGjIZa5s.js";import{a as b,E as y}from"./el-tab-pane.BAi5YHW8.js";import{E as V}from"./el-tree.DcHy0bl4.js";import{E as k}from"./el-checkbox.Bx2MqeyX.js";import{_ as v}from"./index.Ca7HhsrZ.js";import{_ as w}from"./index.uvQ3DMPv.js";import{E as U,a as j}from"./el-table-column.CcJDJdsG.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-popper.DZg10sPd.js";import"./el-scrollbar.DAmtYv6U.js";import{E as q}from"./el-link.Ds1J_vSa.js";import{_ as x}from"./FileImage.CNK6_fwR.js";import{a as C,E as D}from"./el-select.Dphl92Bb.js";import{E}from"./el-dialog.BQ-7T3N1.js";import{E as T,a as A}from"./el-form-item.LUBrM-X2.js";import{E as I}from"./el-text.BpgAV3tu.js";import{E as P}from"./el-switch.CZooYmGS.js";import S from"./MemberImport.SmbRfOsX.js";import $ from"./MemberExport.BzBBkGUu.js";import{E as M}from"./el-row.CR2lAonX.js";import{E as O}from"./el-col.Asb1dzXh.js";import{E as G}from"./el-date-picker.CuOHw7o_.js";import{E as L}from"./el-radio.zApfy_2f.js";import{c as z}from"./permission.6opTfbBv.js";import{s as B}from"./screen-height.CaLnsKT6.js";import{c as R,a as Y}from"./index.DKis4amu.js";import{g as F}from"./settings.BkEO_yzR.js";import{l as Q,i as H,e as N,a as K,r as J,b as W,c as X,d as Z,f as ee,g as le,h as ae}from"./member.uE2K3zwp.js";import{_ as te}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as ie}from"./index.CC5uJ0zJ.js";import"./strings.BFjoWW54.js";import"./index.B32kbnyx.js";import"./isEqual.C9MgJhLZ.js";import"./_Uint8Array.BeplMWlC.js";import"./index.BIv6f7sb.js";import"./raf.CCooGNZO.js";import"./index.BAnbBVvD.js";import"./el-avatar.CztSEU-_.js";import"./el-image-viewer.CKIWDlAT.js";import"./index.CZvH84Pk.js";import"./FilePreview.ysv9CpFr.js";/* empty css                          */import"./el-progress.C11kH2od.js";import"./cloneDeep.CpzyAp_h.js";import"./el-card.DQc9Ri4s.js";/* empty css                       */import"./group.Dp74GP4K.js";import"./tag.C6qLWou5.js";import"./index.D1QADgj8.js";import"./castArray.BF9loTbA.js";import"./refs.A9PVpu8F.js";import"./el-table-v2.nF-zXTfY.js";import"./tagsView.DWSC-EGY.js";const oe={class:"app-container"},se={class:"custom-tree-node"},de={key:0,style:{color:"#1890ff"},title:"已分配"},re=["title"],ue={key:1,style:{"margin-left":"10px",color:"#fff"}},ne={key:2,style:{"margin-left":"10px"},title:"分组"},me={key:3,style:{"margin-left":"10px",color:"#fff"}},pe={key:4,style:{"margin-left":"10px"},title:"免权"},ce={key:5,style:{"margin-left":"10px",color:"#fff"}},he={key:6,style:{"margin-left":"10px"},title:"免登"},ge={key:7,style:{"margin-left":"10px",color:"#fff"}};const _e=te({name:"Member",components:{Pagination:w,MemberExport:$,MemberImport:S},data:()=>({name:"会员",height:680,loading:!1,idkey:"member_id",exps:[{exp:"like",name:"包含"}],query:{page:1,limit:F(),search_field:"nickname",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",model:{member_id:"",avatar_id:0,avatar_url:"",tag_ids:[],group_ids:[],nickname:"",username:"",password:"",phone:"",email:"",name:"",gender:0,region_id:"",remark:"",sort:250,api_ids:[],thirds:[]},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},genders:[],platforms:[],applications:[],regionData:[],regionProps:{checkStrictly:!0,value:"region_id",label:"region_name",emitPath:!1},regionQueryProps:{checkStrictly:!0,value:"region_id",label:"region_name",multiple:!0,emitPath:!1},tagData:[],groupData:[],selection:[],selectIds:"",selectTitle:"操作",selectDialog:!1,selectType:"",region_id:0,tag_ids:[],group_ids:[],password:"",is_super:0,is_disable:0,apiProps:{label:"api_name",children:"children"},apiCheckAll:!1,apiExpandAll:!1,thirdUnbindDialog:!1,thirdUnbindModel:{},thirdUnbindLoad:!1}),created(){this.height=B(),this.list()},methods:{checkPermission:z,clipboard:R,list(){this.loading=!0,Q(this.query).then((e=>{this.data=e.data.list,this.count=e.data.count,this.genders=e.data.genders,this.platforms=e.data.platforms,this.applications=e.data.applications,this.regionData=e.data.region,this.tagData=e.data.tag,this.groupData=e.data.group,this.exps=e.data.exps,this.loading=!1})).catch((()=>{this.loading=!1}))},add(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit(e){this.dialog=!0,this.dialogTitle=this.name+"修改："+e[this.idkey];var l={};l[this.idkey]=e[this.idkey],H(l).then((e=>{this.reset(e.data)})).catch((()=>{}))},cancel(){this.dialog=!1,this.reset()},submit(){this.$refs.ref.validate((l=>{l?(this.loading=!0,this.model.api_tree=[],this.model.thirds=[],this.model[this.idkey]?N(this.model).then((l=>{this.list(),this.dialog=!1,e.success(l.msg)})).catch((()=>{this.loading=!1})):K(this.model).then((l=>{this.list(),this.dialog=!1,e.success(l.msg)})).catch((()=>{this.loading=!1}))):e.error("请完善必填项（带红色星号*）")}))},reset(e){if(this.model=e||this.$options.data().model,this.apiExpandAll=!1,void 0!==this.$refs.ref)try{this.$refs.ref.resetFields(),this.$refs.ref.clearValidate()}catch(l){}},search(){this.query.page=1,this.list()},refresh(){const e=this.query.limit;this.query=this.$options.data().query,this.$refs.table.clearSort(),this.query.limit=e,this.list()},sort(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds(e){return Y(e,this.idkey)},selectAlert(){l.alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:()=>{}})},selectOpen(e,l=""){if(l){this.$refs.table.clearSelection();const e=l.length;for(let a=0;a<e;a++)this.$refs.table.toggleRowSelection(l[a],!0)}this.selection.length?(this.selectTitle="操作","region"===e?this.selectTitle=this.name+"修改所在地":"edittag"===e?this.selectTitle=this.name+"修改标签":"editgroup"===e?this.selectTitle=this.name+"修改分组":"repwd"===e?this.selectTitle=this.name+"重置密码":"super"===e?this.selectTitle=this.name+"是否超会":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel(){this.selectDialog=!1},selectSubmit(){if(this.selection.length){const e=this.selectType;"region"===e?this.region(this.selection):"edittag"===e?this.edittag(this.selection):"editgroup"===e?this.editgroup(this.selection):"repwd"===e?this.repwd(this.selection):"super"===e?this.issuper(this.selection,!0):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},region(l){l.length?(this.loading=!0,J({ids:this.selectGetIds(l),region_id:this.region_id}).then((l=>{this.list(),e.success(l.msg)})).catch((()=>{this.loading=!1}))):this.selectAlert()},edittag(l){l.length?(this.loading=!0,W({ids:this.selectGetIds(l),tag_ids:this.tag_ids}).then((l=>{this.list(),e.success(l.msg)})).catch((()=>{this.loading=!1}))):this.selectAlert()},editgroup(l){l.length?(this.loading=!0,X({ids:this.selectGetIds(l),group_ids:this.group_ids}).then((l=>{this.list(),e.success(l.msg)})).catch((()=>{this.loading=!1}))):this.selectAlert()},repwd(l){l.length?this.password?(this.loading=!0,Z({ids:this.selectGetIds(l),password:this.password}).then((l=>{this.list(),e.success(l.msg)})).catch((()=>{this.loading=!1}))):e.error("请输入新密码"):this.selectAlert()},issuper(l,a=!1){if(l.length){this.loading=!0;var t=l[0].is_super;a&&(t=this.is_super),ee({ids:this.selectGetIds(l),is_super:t}).then((l=>{this.list(),e.success(l.msg)})).catch((()=>{this.list()}))}else this.selectAlert()},disable(l,a=!1){if(l.length){this.loading=!0;var t=l[0].is_disable;a&&(t=this.is_disable),le({ids:this.selectGetIds(l),is_disable:t}).then((l=>{this.list(),e.success(l.msg)})).catch((()=>{this.list()}))}else this.selectAlert()},dele(l){l.length?(this.loading=!0,ae({ids:this.selectGetIds(l)}).then((l=>{this.list(),e.success(l.msg)})).catch((()=>{this.loading=!1}))):this.selectAlert()},apiExpandAllChange(){const e=this.apiExpandAll,l=this.$refs.apiRef.store._getAllNodes().length;for(let a=0;a<l;a++)this.$refs.apiRef.store._getAllNodes()[a].expanded=e},thirdUnbindBtn(e){this.thirdUnbindDialog=!0,this.thirdUnbindModel=e},thirdUnbindSubmit(){const a=this.thirdUnbindModel;a?(this.thirdUnbindLoad=!0,ae({ids:[a.third_id],type:"third"}).then((l=>{var t={};t[this.idkey]=a[this.idkey],H(t).then((e=>{this.model.thirds=e.data.thirds})).catch((()=>{})),this.thirdUnbindLoad=!1,this.thirdUnbindDialog=!1,e.success(l.msg)})).catch((()=>{this.thirdUnbindLoad=!1}))):l.alert("请选择需要操作的"+this.name+"第三方账号","提示",{type:"warning",callback:()=>{}})},thirdDisable(l){var a={};a[this.idkey]=l[this.idkey],le({ids:[l.third_id],is_disable:l.is_disable,type:"third"}).then((l=>{H(a).then((e=>{this.model.thirds=e.data.thirds})).catch((()=>{})),e.success(l.msg)})).catch((()=>{H(a).then((e=>{this.model.thirds=e.data.thirds})).catch((()=>{}))}))}}},[["render",function(e,l,z,B,R,Y){const F=C,Q=D,H=L,N=g,K=G,J=_,W=O,X=M,Z=$,ee=S,le=T,ae=P,te=I,_e=A,fe=ie,be=E,ye=U,Ve=x,ke=q,ve=j,we=w,Ue=b,je=k,qe=v,xe=V,Ce=y,De=f;return a(),t("div",oe,[i(X,null,{default:o((()=>[i(W,{class:"mb-2"},{default:o((()=>[i(Q,{modelValue:R.query.search_field,"onUpdate:modelValue":l[0]||(l[0]=e=>R.query.search_field=e),class:"ya-search-field",placeholder:"查询字段"},{default:o((()=>[i(F,{value:R.idkey,label:"ID"},null,8,["value"]),i(F,{value:"nickname",label:"昵称"}),i(F,{value:"username",label:"用户名"}),i(F,{value:"phone",label:"手机"}),i(F,{value:"email",label:"邮箱"}),i(F,{value:"tag_ids",label:"标签"}),i(F,{value:"group_ids",label:"分组"}),i(F,{value:"is_super",label:"超会"}),i(F,{value:"is_disable",label:"禁用"}),i(F,{value:"remark",label:"备注"}),i(F,{value:"name",label:"姓名"}),i(F,{value:"gender",label:"性别"}),i(F,{value:"region_id",label:"所在地"}),i(F,{value:"platform",label:"注册平台"}),i(F,{value:"application",label:"注册应用"})])),_:1},8,["modelValue"]),i(Q,{modelValue:R.query.search_exp,"onUpdate:modelValue":l[1]||(l[1]=e=>R.query.search_exp=e),class:"ya-search-exp"},{default:o((()=>[(a(!0),t(s,null,d(R.exps,(e=>(a(),r(F,{key:e.exp,value:e.exp,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),"tag_ids"===R.query.search_field?(a(),r(Q,{key:0,modelValue:R.query.search_value,"onUpdate:modelValue":l[2]||(l[2]=e=>R.query.search_value=e),class:"ya-search-value",clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:o((()=>[(a(!0),t(s,null,d(R.tagData,(e=>(a(),r(F,{key:e.tag_id,label:e.tag_name,value:e.tag_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):"group_ids"===R.query.search_field?(a(),r(Q,{key:1,modelValue:R.query.search_value,"onUpdate:modelValue":l[3]||(l[3]=e=>R.query.search_value=e),class:"ya-search-value",clearable:"",filterable:"",multiple:"","collapse-tags":""},{default:o((()=>[(a(!0),t(s,null,d(R.groupData,(e=>(a(),r(F,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):"is_super"===R.query.search_field||"is_disable"===R.query.search_field?(a(),r(Q,{key:2,modelValue:R.query.search_value,"onUpdate:modelValue":l[4]||(l[4]=e=>R.query.search_value=e),class:"ya-search-value",clearable:""},{default:o((()=>[i(F,{value:1,label:"是"}),i(F,{value:0,label:"否"})])),_:1},8,["modelValue"])):"platform"===R.query.search_field?(a(),r(Q,{key:3,modelValue:R.query.search_value,"onUpdate:modelValue":l[5]||(l[5]=e=>R.query.search_value=e),class:"ya-search-value",clearable:""},{default:o((()=>[(a(!0),t(s,null,d(R.platforms,((e,l)=>(a(),r(F,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):"application"===R.query.search_field?(a(),r(Q,{key:4,modelValue:R.query.search_value,"onUpdate:modelValue":l[6]||(l[6]=e=>R.query.search_value=e),class:"ya-search-value",clearable:""},{default:o((()=>[(a(!0),t(s,null,d(R.applications,((e,l)=>(a(),r(F,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):"region_id"===R.query.search_field?(a(),r(H,{key:5,modelValue:R.query.search_value,"onUpdate:modelValue":l[7]||(l[7]=e=>R.query.search_value=e),class:"ya-search-value",options:R.regionData,props:R.regionQueryProps,clearable:"",filterable:"","collapse-tags":""},null,8,["modelValue","options","props"])):"gender"===R.query.search_field?(a(),r(Q,{key:6,modelValue:R.query.search_value,"onUpdate:modelValue":l[8]||(l[8]=e=>R.query.search_value=e),class:"ya-search-value",clearable:""},{default:o((()=>[(a(!0),t(s,null,d(R.genders,((e,l)=>(a(),r(F,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(a(),r(N,{key:7,modelValue:R.query.search_value,"onUpdate:modelValue":l[9]||(l[9]=e=>R.query.search_value=e),class:"ya-search-value",placeholder:"查询内容",clearable:""},null,8,["modelValue"])),i(Q,{modelValue:R.query.date_field,"onUpdate:modelValue":l[10]||(l[10]=e=>R.query.date_field=e),class:"ya-date-field",placeholder:"时间字段"},{default:o((()=>[i(F,{value:"create_time",label:"注册时间"}),i(F,{value:"login_time",label:"登录时间"}),i(F,{value:"update_time",label:"修改时间"})])),_:1},8,["modelValue"]),i(K,{modelValue:R.query.date_value,"onUpdate:modelValue":l[11]||(l[11]=e=>R.query.date_value=e),type:"datetimerange",class:"ya-date-value","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2024,1,1,0,0,0),new Date(2024,1,1,23,59,59)]},null,8,["modelValue","default-time"]),i(J,{type:"primary",title:"查询/刷新",onClick:l[12]||(l[12]=e=>Y.search())},{default:o((()=>l[62]||(l[62]=[u("查询")]))),_:1}),i(J,{type:"default",title:"重置查询条件",onClick:l[13]||(l[13]=e=>Y.refresh())},{default:o((()=>l[63]||(l[63]=[u("重置")]))),_:1}),i(J,{type:"primary",onClick:l[14]||(l[14]=e=>Y.add())},{default:o((()=>l[64]||(l[64]=[u("添加")]))),_:1})])),_:1})])),_:1}),i(X,null,{default:o((()=>[i(W,null,{default:o((()=>[i(J,{title:"删除",onClick:l[15]||(l[15]=e=>Y.selectOpen("dele"))},{default:o((()=>l[65]||(l[65]=[u("删除")]))),_:1}),i(J,{title:"是否禁用",onClick:l[16]||(l[16]=e=>Y.selectOpen("disable"))},{default:o((()=>l[66]||(l[66]=[u("禁用")]))),_:1}),i(J,{title:"修改标签",onClick:l[17]||(l[17]=e=>Y.selectOpen("edittag"))},{default:o((()=>l[67]||(l[67]=[u("标签")]))),_:1}),i(J,{title:"修改分组",onClick:l[18]||(l[18]=e=>Y.selectOpen("editgroup"))},{default:o((()=>l[68]||(l[68]=[u("分组")]))),_:1}),i(J,{title:"重置密码",onClick:l[19]||(l[19]=e=>Y.selectOpen("repwd"))},{default:o((()=>l[69]||(l[69]=[u("密码")]))),_:1}),i(J,{title:"是否超会",onClick:l[20]||(l[20]=e=>Y.selectOpen("super"))},{default:o((()=>l[70]||(l[70]=[u("超会")]))),_:1}),i(J,{title:"修改所在地",onClick:l[21]||(l[21]=e=>Y.selectOpen("region"))},{default:o((()=>l[71]||(l[71]=[u("所在地")]))),_:1}),i(Z,{query:R.query},null,8,["query"]),i(ee)])),_:1})])),_:1}),i(be,{modelValue:R.selectDialog,"onUpdate:modelValue":l[29]||(l[29]=e=>R.selectDialog=e),title:R.selectTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"20vh"},{footer:o((()=>[i(J,{loading:R.loading,onClick:Y.selectCancel},{default:o((()=>l[74]||(l[74]=[u("取消")]))),_:1},8,["loading","onClick"]),i(J,{loading:R.loading,type:"primary",onClick:Y.selectSubmit},{default:o((()=>l[75]||(l[75]=[u("提交")]))),_:1},8,["loading","onClick"])])),default:o((()=>[i(fe,{native:"",height:R.height-200},{default:o((()=>[i(_e,{"label-width":"120px"},{default:o((()=>["region"===R.selectType?(a(),r(le,{key:0,label:"所在地"},{default:o((()=>[i(H,{modelValue:R.region_id,"onUpdate:modelValue":l[22]||(l[22]=e=>R.region_id=e),options:R.regionData,props:R.regionProps,class:"w-full",clearable:"",filterable:""},null,8,["modelValue","options","props"])])),_:1})):"edittag"===R.selectType?(a(),r(le,{key:1,label:"标签"},{default:o((()=>[i(Q,{modelValue:R.tag_ids,"onUpdate:modelValue":l[23]||(l[23]=e=>R.tag_ids=e),class:"w-full",clearable:"",filterable:"",multiple:""},{default:o((()=>[(a(!0),t(s,null,d(R.tagData,(e=>(a(),r(F,{key:e.tag_id,label:e.tag_name,value:e.tag_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):"editgroup"===R.selectType?(a(),r(le,{key:2,label:"分组"},{default:o((()=>[i(Q,{modelValue:R.group_ids,"onUpdate:modelValue":l[24]||(l[24]=e=>R.group_ids=e),class:"w-full",clearable:"",filterable:"",multiple:""},{default:o((()=>[(a(!0),t(s,null,d(R.groupData,(e=>(a(),r(F,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):"super"===R.selectType?(a(),r(le,{key:3,label:"是否超会"},{default:o((()=>[i(ae,{modelValue:R.is_super,"onUpdate:modelValue":l[25]||(l[25]=e=>R.is_super=e),"active-value":1,"inactive-value":0},null,8,["modelValue"]),R.is_super?(a(),r(te,{key:0,size:"default"},{default:o((()=>l[72]||(l[72]=[u(" 超级会员，拥有所有权限。")]))),_:1})):n("",!0)])),_:1})):"disable"===R.selectType?(a(),r(le,{key:4,label:"是否禁用"},{default:o((()=>[i(ae,{modelValue:R.is_disable,"onUpdate:modelValue":l[26]||(l[26]=e=>R.is_disable=e),"active-value":1,"inactive-value":0},null,8,["modelValue"]),R.is_disable?(a(),r(te,{key:0,size:"default",type:"danger"},{default:o((()=>l[73]||(l[73]=[u(" 禁用后无法登录！")]))),_:1})):n("",!0)])),_:1})):"repwd"===R.selectType?(a(),r(le,{key:5,label:"新密码"},{default:o((()=>[i(N,{modelValue:R.password,"onUpdate:modelValue":l[27]||(l[27]=e=>R.password=e),placeholder:"请输入新密码",clearable:""},null,8,["modelValue"])])),_:1})):"dele"===R.selectType?(a(),r(le,{key:6,label:"删除"},{default:o((()=>[i(te,{size:"default",type:"danger"},{default:o((()=>[u("确定要删除选中的"+m(R.name)+"吗？",1)])),_:1})])),_:1})):n("",!0),i(le,{label:R.name+"ID"},{default:o((()=>[i(N,{modelValue:R.selectIds,"onUpdate:modelValue":l[28]||(l[28]=e=>R.selectIds=e),type:"textarea",rows:18,disabled:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1},8,["height"])])),_:1},8,["modelValue","title"]),p((a(),r(ve,{ref:"table",data:R.data,height:R.height,onSortChange:Y.sort,onSelectionChange:Y.select},{default:o((()=>[i(ye,{type:"selection",width:"42",title:"全选/反选"}),i(ye,{prop:R.idkey,label:"ID",width:"80",sortable:"custom"},null,8,["prop"]),i(ye,{prop:"avatar_id",label:"头像","min-width":"62"},{default:o((e=>[i(Ve,{"file-url":e.row.avatar_url,avatar:"",lazy:""},null,8,["file-url"])])),_:1}),i(ye,{prop:"nickname",label:"昵称","min-width":"170",sortable:"custom","show-overflow-tooltip":""}),i(ye,{prop:"username",label:"用户名","min-width":"170",sortable:"custom","show-overflow-tooltip":""}),i(ye,{prop:"phone",label:"手机","min-width":"112",sortable:"custom","show-overflow-tooltip":""}),i(ye,{prop:"email",label:"邮箱","min-width":"200",sortable:"custom","show-overflow-tooltip":""}),i(ye,{prop:"tag_names",label:"标签","min-width":"130","show-overflow-tooltip":""}),i(ye,{prop:"group_names",label:"分组","min-width":"135","show-overflow-tooltip":""}),i(ye,{prop:"is_super_name",label:"超会","min-width":"80",sortable:"custom"}),i(ye,{prop:"is_disable_name",label:"禁用","min-width":"80",sortable:"custom"}),i(ye,{prop:"sort",label:"排序",width:"85",sortable:"custom"}),i(ye,{prop:"create_time",label:"注册时间",width:"165",sortable:"custom"}),i(ye,{label:"操作",width:"95"},{default:o((e=>[i(ke,{type:"primary",class:"mr-1",underline:!1,onClick:l=>Y.edit(e.row)},{default:o((()=>l[76]||(l[76]=[u(" 修改 ")]))),_:2},1032,["onClick"]),i(ke,{type:"primary",underline:!1,onClick:l=>Y.selectOpen("dele",[e.row])},{default:o((()=>l[77]||(l[77]=[u(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","height","onSortChange","onSelectionChange"])),[[De,R.loading]]),p(i(we,{total:R.count,"onUpdate:total":l[30]||(l[30]=e=>R.count=e),page:R.query.page,"onUpdate:page":l[31]||(l[31]=e=>R.query.page=e),limit:R.query.limit,"onUpdate:limit":l[32]||(l[32]=e=>R.query.limit=e),onPagination:Y.list},null,8,["total","page","limit","onPagination"]),[[c,R.count>0]]),i(be,{modelValue:R.dialog,"onUpdate:modelValue":l[59]||(l[59]=e=>R.dialog=e),title:R.dialogTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":Y.cancel,top:"5vh"},{footer:o((()=>[i(J,{loading:R.loading,onClick:Y.cancel},{default:o((()=>l[80]||(l[80]=[u("取消")]))),_:1},8,["loading","onClick"]),i(J,{loading:R.loading,type:"primary",onClick:Y.submit},{default:o((()=>l[81]||(l[81]=[u("提交")]))),_:1},8,["loading","onClick"])])),default:o((()=>[i(_e,{ref:"ref",model:R.model,rules:R.rules,"label-width":"100px"},{default:o((()=>[i(Ce,null,{default:o((()=>[i(Ue,{label:"基础信息"},{default:o((()=>[i(fe,{native:"",height:R.height-80},{default:o((()=>[i(le,{label:"头像",prop:"avatar_id"},{default:o((()=>[i(Ve,{modelValue:R.model.avatar_id,"onUpdate:modelValue":l[33]||(l[33]=e=>R.model.avatar_id=e),"file-url":R.model.avatar_url,"file-title":"上传头像","file-tip":"图片小于200KB，jpg、png格式，宽高 1:1。",height:100,avatar:"",upload:""},null,8,["modelValue","file-url"])])),_:1}),i(le,{label:"昵称",prop:"nickname"},{default:o((()=>[i(N,{key:"nickname",modelValue:R.model.nickname,"onUpdate:modelValue":l[34]||(l[34]=e=>R.model.nickname=e),placeholder:"请输入昵称",clearable:""},null,8,["modelValue"])])),_:1}),i(le,{label:"用户名",prop:"username"},{default:o((()=>[i(N,{key:"username",modelValue:R.model.username,"onUpdate:modelValue":l[35]||(l[35]=e=>R.model.username=e),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])])),_:1}),""==R.model.member_id?(a(),r(le,{key:0,label:"密码",prop:"password"},{default:o((()=>[i(N,{key:"password",modelValue:R.model.password,"onUpdate:modelValue":l[36]||(l[36]=e=>R.model.password=e),placeholder:"请输入密码",clearable:"","show-password":""},null,8,["modelValue"])])),_:1})):n("",!0),i(le,{label:"手机",prop:"phone"},{default:o((()=>[i(N,{modelValue:R.model.phone,"onUpdate:modelValue":l[37]||(l[37]=e=>R.model.phone=e),clearable:""},null,8,["modelValue"])])),_:1}),i(le,{label:"邮箱",prop:"email"},{default:o((()=>[i(N,{modelValue:R.model.email,"onUpdate:modelValue":l[38]||(l[38]=e=>R.model.email=e),clearable:""},null,8,["modelValue"])])),_:1}),i(le,{label:"姓名",prop:"name"},{default:o((()=>[i(N,{modelValue:R.model.name,"onUpdate:modelValue":l[39]||(l[39]=e=>R.model.name=e),clearable:""},null,8,["modelValue"])])),_:1}),i(le,{label:"性别",prop:"gender"},{default:o((()=>[i(Q,{modelValue:R.model.gender,"onUpdate:modelValue":l[40]||(l[40]=e=>R.model.gender=e)},{default:o((()=>[(a(!0),t(s,null,d(R.genders,((e,l)=>(a(),r(F,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(le,{label:"所在地",prop:"region_id"},{default:o((()=>[i(H,{modelValue:R.model.region_id,"onUpdate:modelValue":l[41]||(l[41]=e=>R.model.region_id=e),class:"w-full",options:R.regionData,props:R.regionProps,clearable:""},null,8,["modelValue","options","props"])])),_:1}),i(le,{label:"排序",prop:"sort"},{default:o((()=>[i(N,{modelValue:R.model.sort,"onUpdate:modelValue":l[42]||(l[42]=e=>R.model.sort=e),type:"number"},null,8,["modelValue"])])),_:1}),i(le,{label:"备注",prop:"remark"},{default:o((()=>[i(N,{modelValue:R.model.remark,"onUpdate:modelValue":l[43]||(l[43]=e=>R.model.remark=e),clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["height"])])),_:1}),i(Ue,{label:"权限信息"},{default:o((()=>[i(fe,{native:"",height:R.height-80},{default:o((()=>[i(le,{label:"超会",prop:"is_super"},{default:o((()=>[i(ae,{modelValue:R.model.is_super,"onUpdate:modelValue":l[44]||(l[44]=e=>R.model.is_super=e),"active-value":1,"inactive-value":0,disabled:""},null,8,["modelValue"])])),_:1}),i(le,{label:"禁用",prop:"is_disable"},{default:o((()=>[i(ae,{modelValue:R.model.is_disable,"onUpdate:modelValue":l[45]||(l[45]=e=>R.model.is_disable=e),"active-value":1,"inactive-value":0,disabled:""},null,8,["modelValue"])])),_:1}),i(le,{label:"标签",prop:"tag_ids"},{default:o((()=>[i(Q,{modelValue:R.model.tag_ids,"onUpdate:modelValue":l[46]||(l[46]=e=>R.model.tag_ids=e),class:"w-full",multiple:"",clearable:"",filterable:""},{default:o((()=>[(a(!0),t(s,null,d(R.tagData,(e=>(a(),r(F,{key:e.tag_id,label:e.tag_name,value:e.tag_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(le,{label:"分组(角色)",prop:"group_ids"},{default:o((()=>[i(Q,{modelValue:R.model.group_ids,"onUpdate:modelValue":l[47]||(l[47]=e=>R.model.group_ids=e),class:"w-full",clearable:"",filterable:"",multiple:""},{default:o((()=>[(a(!0),t(s,null,d(R.groupData,(e=>(a(),r(F,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),R.model[R.idkey]?(a(),r(le,{key:0,label:"接口(权限)",prop:"api_ids"},{default:o((()=>[i(W,{span:24},{default:o((()=>[i(je,{modelValue:R.apiExpandAll,"onUpdate:modelValue":l[48]||(l[48]=e=>R.apiExpandAll=e),onChange:Y.apiExpandAllChange},{default:o((()=>l[78]||(l[78]=[u(" 展开 ")]))),_:1},8,["modelValue","onChange"])])),_:1}),i(xe,{ref:"apiRef",data:R.model.api_tree,props:R.apiProps,"default-checked-keys":R.model.api_ids,"expand-on-click-node":!0,"default-expand-all":!1,"check-strictly":!0,"node-key":"api_id","highlight-current":""},{default:o((e=>[h("span",se,[h("span",null,[u(m(e.node.label)+" ",1),e.data.is_check?(a(),t("i",de,[i(qe,{"icon-class":"check"})])):n("",!0)]),h("span",null,[e.data.api_url?(a(),t("i",{key:0,style:{"margin-left":"10px"},title:e.data.api_url},[i(qe,{"icon-class":"link"})],8,re)):(a(),t("i",ue,[i(qe,{"icon-class":"link"})])),e.data.is_group?(a(),t("i",ne,[i(qe,{"icon-class":"s-custom"})])):(a(),t("i",me,[i(qe,{"icon-class":"s-custom"})])),e.data.is_unauth?(a(),t("i",pe,[i(qe,{"icon-class":"unlock"})])):(a(),t("i",ce,[i(qe,{"icon-class":"unlock"})])),e.data.is_unlogin?(a(),t("i",he,[i(qe,{"icon-class":"user"})])):(a(),t("i",ge,[i(qe,{"icon-class":"user"})]))])])])),_:1},8,["data","props","default-checked-keys"])])),_:1})):n("",!0)])),_:1},8,["height"])])),_:1}),i(Ue,{label:"登录注册"},{default:o((()=>[i(fe,{native:"",height:R.height-80},{default:o((()=>[R.model[R.idkey]?(a(),r(le,{key:0,label:"登录IP",prop:"login_ip"},{default:o((()=>[i(N,{modelValue:R.model.login_ip,"onUpdate:modelValue":l[49]||(l[49]=e=>R.model.login_ip=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:1,label:"登录地区",prop:"login_region"},{default:o((()=>[i(N,{modelValue:R.model.login_region,"onUpdate:modelValue":l[50]||(l[50]=e=>R.model.login_region=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:2,label:"登录时间",prop:"login_time"},{default:o((()=>[i(N,{modelValue:R.model.login_time,"onUpdate:modelValue":l[51]||(l[51]=e=>R.model.login_time=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:3,label:"登录次数",prop:"login_num"},{default:o((()=>[i(N,{modelValue:R.model.login_num,"onUpdate:modelValue":l[52]||(l[52]=e=>R.model.login_num=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:4,label:"注册平台",prop:"platform_name"},{default:o((()=>[i(N,{modelValue:R.model.platform_name,"onUpdate:modelValue":l[53]||(l[53]=e=>R.model.platform_name=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:5,label:"注册应用",prop:"application_name"},{default:o((()=>[i(N,{modelValue:R.model.application_name,"onUpdate:modelValue":l[54]||(l[54]=e=>R.model.application_name=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:6,label:"注册时间",prop:"create_time"},{default:o((()=>[i(N,{modelValue:R.model.create_time,"onUpdate:modelValue":l[55]||(l[55]=e=>R.model.create_time=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:7,label:"修改时间",prop:"update_time"},{default:o((()=>[i(N,{modelValue:R.model.update_time,"onUpdate:modelValue":l[56]||(l[56]=e=>R.model.update_time=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model[R.idkey]?(a(),r(le,{key:8,label:"退出时间",prop:"logout_time"},{default:o((()=>[i(N,{modelValue:R.model.logout_time,"onUpdate:modelValue":l[57]||(l[57]=e=>R.model.logout_time=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0),R.model.delete_time?(a(),r(le,{key:9,label:"删除时间",prop:"delete_time"},{default:o((()=>[i(N,{modelValue:R.model.delete_time,"onUpdate:modelValue":l[58]||(l[58]=e=>R.model.delete_time=e),disabled:""},null,8,["modelValue"])])),_:1})):n("",!0)])),_:1},8,["height"])])),_:1}),i(Ue,{label:"第三方账号"},{default:o((()=>[i(fe,{native:"",height:R.height-80},{default:o((()=>[R.model[R.idkey]?(a(),r(ve,{key:0,data:R.model.thirds},{default:o((()=>[i(ye,{prop:"third_id",label:"ID",width:"80"}),i(ye,{prop:"headimgurl",label:"头像","min-width":"62"},{default:o((e=>[i(Ve,{"file-url":e.row.headimgurl,avatar:"",lazy:""},null,8,["file-url"])])),_:1}),i(ye,{prop:"nickname",label:"昵称","min-width":"100","show-overflow-tooltip":""}),i(ye,{prop:"platform_name",label:"平台","min-width":"80","show-overflow-tooltip":""}),i(ye,{prop:"application_name",label:"应用","min-width":"110","show-overflow-tooltip":""}),i(ye,{prop:"is_disable",label:"禁用","min-width":"85"},{default:o((e=>[i(ae,{modelValue:e.row.is_disable,"onUpdate:modelValue":l=>e.row.is_disable=l,loading:R.thirdUnbindLoad,"active-value":1,"inactive-value":0,onChange:l=>Y.thirdDisable(e.row)},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])])),_:1}),i(ye,{prop:"create_time",label:"添加/绑定时间","min-width":"165"}),i(ye,{prop:"login_time",label:"登录时间",width:"165"}),i(ye,{label:"操作",width:"70"},{default:o((e=>[i(ke,{type:"primary",underline:!1,onClick:l=>Y.thirdUnbindBtn(e.row)},{default:o((()=>l[79]||(l[79]=[u(" 解绑 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):n("",!0)])),_:1},8,["height"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","before-close"]),i(be,{modelValue:R.thirdUnbindDialog,"onUpdate:modelValue":l[61]||(l[61]=e=>R.thirdUnbindDialog=e),title:"会员第三方账号解绑",width:"25%",top:"20vh"},{footer:o((()=>[i(J,{loading:R.thirdUnbindLoad,onClick:l[60]||(l[60]=e=>R.thirdUnbindDialog=!1)},{default:o((()=>l[83]||(l[83]=[u("取消")]))),_:1},8,["loading"]),i(J,{loading:R.thirdUnbindLoad,type:"primary",onClick:Y.thirdUnbindSubmit},{default:o((()=>l[84]||(l[84]=[u(" 确定 ")]))),_:1},8,["loading","onClick"])])),default:o((()=>[i(te,{size:"default",type:"danger"},{default:o((()=>l[82]||(l[82]=[u(" 解绑后该会员无法再通过该第三方账号登录，确定要解绑吗？ ")]))),_:1})])),_:1},8,["modelValue"])])}]]);export{_e as default};
