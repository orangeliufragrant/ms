import{at as e,ad as l,ae as t,c as s,e as a,a4 as i,w as o,Q as r,ah as u,l as d,a3 as n,k as c,t as m,ac as h,O as p,P as f,aB as _,au as g}from"./index.fjkLwUVu.js";import{v as y}from"./el-loading.DGjIZa5s.js";import{_ as k}from"./index.uvQ3DMPv.js";import{E as b,a as C}from"./el-table-column.CcJDJdsG.js";import{E as v}from"./el-checkbox.Bx2MqeyX.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-popper.DZg10sPd.js";import"./el-scrollbar.DAmtYv6U.js";import{E as V}from"./el-link.Ds1J_vSa.js";import{a as S,E as x}from"./el-select.Dphl92Bb.js";import{E as w}from"./el-dialog.BQ-7T3N1.js";import{E as R,a as A}from"./el-form-item.LUBrM-X2.js";import{E as D}from"./el-switch.CZooYmGS.js";import{E as j}from"./el-tree.DcHy0bl4.js";import{_ as U}from"./index.Ca7HhsrZ.js";import{E as q}from"./el-row.CR2lAonX.js";import{E as I}from"./el-col.Asb1dzXh.js";import{E as T}from"./el-date-picker.CuOHw7o_.js";import{s as E}from"./screen-height.CaLnsKT6.js";import{a as M}from"./index.DKis4amu.js";import{g as $}from"./settings.BkEO_yzR.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{E as L}from"./index.CC5uJ0zJ.js";import"./isEqual.C9MgJhLZ.js";import"./_Uint8Array.BeplMWlC.js";import"./strings.BFjoWW54.js";import"./index.BIv6f7sb.js";import"./raf.CCooGNZO.js";import"./index.BAnbBVvD.js";import"./castArray.BF9loTbA.js";import"./refs.A9PVpu8F.js";import"./index.B32kbnyx.js";import"./tagsView.DWSC-EGY.js";const Q="/admin/system.Role/";function G(l){return e({url:Q+"userRemove",method:"post",data:l})}const O={class:"app-container"},K={style:{}},N={class:"custom-tree-node"},Y={key:0,style:{"margin-left":"10px"}},z=["title"],H={key:1,style:{"margin-left":"10px",color:"#fff"}},B={key:2,style:{"margin-left":"10px"},title:"免登"},F={key:3,style:{"margin-left":"10px",color:"#fff"}},J={key:4,style:{"margin-left":"10px"},title:"免权"},W={key:5,style:{"margin-left":"10px",color:"#fff"}},X={class:"c-red"},Z={class:"custom-tree-node"},ee={key:0,style:{"margin-left":"10px"}},le=["title"],te={key:1,style:{"margin-left":"10px",color:"#fff"}},se={key:2,style:{"margin-left":"10px"},title:"免登"},ae={key:3,class:"el-icon-user",style:{"margin-left":"10px",color:"#fff"}},ie={key:4,style:{"margin-left":"10px"},title:"免权"},oe={key:5,style:{"margin-left":"10px",color:"#fff"}};const re=P({name:"SystemRole",components:{Pagination:k},data:()=>({name:"角色",height:680,loading:!1,idkey:"role_id",exps:[{exp:"like",name:"包含"}],query:{page:1,limit:$(),search_field:"role_name",search_exp:"like",date_field:"create_time"},data:[],count:0,dialog:!1,dialogTitle:"",dialogLoad:!1,model:{role_id:"",menu_ids:[],role_name:"",role_desc:"",remark:"",sort:250},rules:{role_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},menuIdkey:"menu_id",menuData:[],menuIds:[],menuProps:{children:"children",label:"menu_name"},menuCheckAll:!1,menuExpandAll:!1,menuCheckAllPid:{},selMenuRefs:"menuRef",selection:[],selectIds:"",selectTitle:"操作",selectDialog:!1,selectType:"",is_disable:0,menu_ids:[],userPk:"user_id",userName:"用户",userDialog:!1,userDialogTitle:"",userLoad:!1,userData:[],userCount:0,userQuery:{page:1,limit:$(),search_field:"nickname",search_exp:"like",search_value:""},userSelection:[],userSelectIds:"",userSelectTitle:"操作",userSelectDialog:!1,userSelectType:""}),created(){this.height=E(),this.list()},methods:{list(){var l;this.loading=!0,(l=this.query,e({url:Q+"list",method:"get",params:l})).then((e=>{this.data=e.data.list,this.count=e.data.count,this.menuData=e.data.menu,this.menuIds=e.data.menu_ids,this.exps=e.data.exps,this.loading=!1})).catch((()=>{this.loading=!1}))},add(){this.dialog=!0,this.dialogTitle=this.name+"添加",this.reset()},edit(l){this.dialog=!0,this.dialogTitle=this.name+"修改："+l[this.idkey];var t,s={};s[this.idkey]=l[this.idkey],(t=s,e({url:Q+"info",method:"get",params:t})).then((e=>{this.reset(e.data)})).catch((()=>{}))},cancel(){this.dialog=!1,this.reset()},submit(){this.$refs.ref.validate((t=>{var s;t&&(this.loading=!0,this.model[this.idkey]?(s=this.model,e({url:Q+"edit",method:"post",data:s})).then((e=>{this.list(),this.dialog=!1,l.success(e.msg)})).catch((()=>{this.loading=!1})):function(l){return e({url:Q+"add",method:"post",data:l})}(this.model).then((e=>{this.list(),this.dialog=!1,l.success(e.msg)})).catch((()=>{this.loading=!1})))}))},reset(e){if(this.model=e||this.$options.data().model,this.menuCheckAll=!1,this.menuExpandAll=!1,void 0!==this.$refs.ref)try{this.$refs.ref.resetFields(),this.$refs.ref.clearValidate()}catch(l){}},search(){this.query.page=1,this.list()},refresh(){const e=this.query.limit;this.query=this.$options.data().query,this.$refs.table.clearSort(),this.query.limit=e,this.list()},sort(e){this.query.sort_field=e.prop,this.query.sort_value="","ascending"===e.order&&(this.query.sort_value="asc",this.list()),"descending"===e.order&&(this.query.sort_value="desc",this.list())},select(e){this.selection=e,this.selectIds=this.selectGetIds(e).toString()},selectGetIds(e){return M(e,this.idkey)},selectAlert(){t.alert("请选择需要操作的"+this.name,"提示",{type:"warning",callback:()=>{}})},selectOpen(e,l=""){if(l){this.$refs.table.clearSelection();const e=l.length;for(let t=0;t<e;t++)this.$refs.table.toggleRowSelection(l[t],!0)}this.selection.length?(this.selectTitle="操作","removeu"===e?this.selectTitle=this.name+"解除用户":"editmenu"===e?this.selectTitle=this.name+"修改菜单":"disable"===e?this.selectTitle=this.name+"是否禁用":"dele"===e&&(this.selectTitle=this.name+"删除"),this.selectDialog=!0,this.selectType=e):this.selectAlert()},selectCancel(){this.selectDialog=!1},selectSubmit(){if(this.selection.length){const e=this.selectType;"removeu"===e?this.removeu(this.selection):"editmenu"===e?this.editmenu(this.selection):"disable"===e?this.disable(this.selection,!0):"dele"===e&&this.dele(this.selection),this.selectDialog=!1}else this.selectAlert()},removeu(e){e.length?(this.loading=!0,G({role_id:this.selectGetIds(e),user_ids:[]}).then((e=>{this.list(),l.success(e.msg)})).catch((()=>{this.loading=!1}))):this.selectAlert()},editmenu(t){var s;t.length?(this.loading=!0,(s={ids:this.selectGetIds(t),menu_ids:this.menu_ids},e({url:Q+"editmenu",method:"post",data:s})).then((e=>{this.list(),l.success(e.msg)})).catch((()=>{this.loading=!1}))):this.selectAlert()},disable(t,s=!1){if(t.length){this.loading=!0;var a=t[0].is_disable;s&&(a=this.is_disable),(i={ids:this.selectGetIds(t),is_disable:a},e({url:Q+"disable",method:"post",data:i})).then((e=>{this.list(),l.success(e.msg)})).catch((()=>{this.list()}))}else this.selectAlert();var i},dele(t){var s;t.length?(s={ids:this.selectGetIds(t)},e({url:Q+"dele",method:"post",data:s})).then((e=>{this.list(),l.success(e.msg)})).catch((()=>{this.loading=!1})):this.selectAlert()},menuCheck(e="menuRef"){this.selMenuRefs=e,this.menuCheckSetKeys()},menuCheckAllChange(e="menuRef"){this.selMenuRefs=e,this.menuCheckAll?this.menuIds.forEach((e=>{this.$refs[this.selMenuRefs].setChecked(e,!0,!0)})):this.$refs[this.selMenuRefs].setCheckedKeys([]),this.menuCheckSetKeys()},menuExpandAllChange(e="menuRef"){this.selMenuRefs=e;const l=this.menuExpandAll,t=this.$refs[this.selMenuRefs].store._getAllNodes().length;for(let s=0;s<t;s++)this.$refs[this.selMenuRefs].store._getAllNodes()[s].expanded=l},menuCheckAllChangePid(e,l,t="menuRef"){this.selMenuRefs=t,this.menuCheckAllPid[l.menu_id]=e.checked,this.$refs[this.selMenuRefs].setChecked(l.menu_id,!this.menuCheckAllPid[l.menu_id],!0),l.children.forEach((e=>{this.$refs[this.selMenuRefs].setChecked(e.menu_id,!this.menuCheckAllPid[l.menu_id],!0)})),this.menuCheckSetKeys()},menuCheckSetKeys(){"menuRef"===this.selMenuRefs?this.model.menu_ids=this.$refs[this.selMenuRefs].getCheckedKeys():this.menu_ids=this.$refs[this.selMenuRefs].getCheckedKeys()},userShow(e){this.userDialog=!0,this.userDialogTitle=this.name+this.userName+"："+e.role_name,this.userQuery.role_id=e.role_id,this.userQuery.search_value="",this.userList()},userList(){var l;this.userLoad=!0,(l=this.userQuery,e({url:Q+"userList",method:"get",params:l})).then((e=>{this.userData=e.data.list,this.userCount=e.data.count,this.userLoad=!1})).catch((()=>{this.userLoad=!1}))},userSort(e){this.userQuery.sort_field=e.prop,this.userQuery.sort_value="","ascending"===e.order&&(this.userQuery.sort_value="asc",this.userList()),"descending"===e.order&&(this.userQuery.sort_value="desc",this.userList())},userSelect(e){this.userSelection=e,this.userSelectIds=this.userSelectGetIds(e).toString()},userSelectGetIds(e){return M(e,this.userPk)},userSelectAlert(){t.alert("请选择需要操作的"+this.userName,"提示",{type:"warning",callback:()=>{}})},userSelectOpen(e,l=""){l&&(this.$refs.userRef.clearSelection(),this.$refs.userRef.toggleRowSelection(l)),this.userSelection.length?(this.userSelectTitle="操作","userRemove"===e&&(this.userSelectTitle=this.name+"解除用户"),this.userSelectDialog=!0,this.userSelectType=e):this.userSelectAlert()},userSelectCancel(){this.userSelectDialog=!1},userSelectSubmit(){if(this.userSelection.length){"userRemove"===this.userSelectType&&this.userRemove(this.userSelection),this.userSelectDialog=!1}else this.userSelectAlert()},userRemove(e){e.length?(this.userLoad=!0,G({role_id:this.userQuery.role_id,user_ids:this.userSelectGetIds(e)}).then((e=>{this.userList(),l.success(e.msg)})).catch((()=>{this.userLoad=!1}))):this.userSelectAlert()}}},[["render",function(e,l,t,E,M,$){const P=S,Q=x,G=_,re=T,ue=g,de=I,ne=q,ce=R,me=v,he=U,pe=j,fe=D,_e=A,ge=L,ye=w,ke=b,be=V,Ce=C,ve=k,Ve=y;return s(),a("div",O,[i(ne,null,{default:o((()=>[i(de,{class:"mb-2"},{default:o((()=>[i(Q,{modelValue:M.query.search_field,"onUpdate:modelValue":l[0]||(l[0]=e=>M.query.search_field=e),class:"ya-search-field",placeholder:"查询字段"},{default:o((()=>[i(P,{value:M.idkey,label:"ID"},null,8,["value"]),i(P,{value:"role_name",label:"名称"}),i(P,{value:"role_desc",label:"描述"}),i(P,{value:"remark",label:"备注"}),i(P,{value:"is_disable",label:"禁用"})])),_:1},8,["modelValue"]),i(Q,{modelValue:M.query.search_exp,"onUpdate:modelValue":l[1]||(l[1]=e=>M.query.search_exp=e),class:"ya-search-exp"},{default:o((()=>[(s(!0),a(r,null,u(M.exps,(e=>(s(),d(P,{key:e.exp,value:e.exp,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"]),"is_disable"===M.query.search_field?(s(),d(Q,{key:0,modelValue:M.query.search_value,"onUpdate:modelValue":l[2]||(l[2]=e=>M.query.search_value=e),class:"ya-search-value"},{default:o((()=>[i(P,{value:1,label:"是"}),i(P,{value:0,label:"否"})])),_:1},8,["modelValue"])):(s(),d(G,{key:1,modelValue:M.query.search_value,"onUpdate:modelValue":l[3]||(l[3]=e=>M.query.search_value=e),class:"ya-search-value",placeholder:"查询内容",clearable:""},null,8,["modelValue"])),i(Q,{modelValue:M.query.date_field,"onUpdate:modelValue":l[4]||(l[4]=e=>M.query.date_field=e),class:"ya-date-field",placeholder:"时间类型"},{default:o((()=>[i(P,{value:"create_time",label:"添加时间"}),i(P,{value:"update_time",label:"修改时间"})])),_:1},8,["modelValue"]),i(re,{modelValue:M.query.date_value,"onUpdate:modelValue":l[5]||(l[5]=e=>M.query.date_value=e),type:"datetimerange",class:"ya-date-value","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2024,1,1,0,0,0),new Date(2024,1,1,23,59,59)]},null,8,["modelValue","default-time"]),i(ue,{type:"primary",title:"查询/刷新",onClick:l[6]||(l[6]=e=>$.search())},{default:o((()=>l[46]||(l[46]=[n("查询")]))),_:1}),i(ue,{type:"default",title:"重置查询条件",onClick:l[7]||(l[7]=e=>$.refresh())},{default:o((()=>l[47]||(l[47]=[n("重置")]))),_:1}),i(ue,{type:"primary",onClick:l[8]||(l[8]=e=>$.add())},{default:o((()=>l[48]||(l[48]=[n("添加")]))),_:1})])),_:1})])),_:1}),i(ne,null,{default:o((()=>[i(de,null,{default:o((()=>[i(ue,{title:"删除",onClick:l[9]||(l[9]=e=>$.selectOpen("dele"))},{default:o((()=>l[49]||(l[49]=[n("删除")]))),_:1}),i(ue,{title:"是否禁用",onClick:l[10]||(l[10]=e=>$.selectOpen("disable"))},{default:o((()=>l[50]||(l[50]=[n("禁用")]))),_:1}),i(ue,{title:"修改菜单",onClick:l[11]||(l[11]=e=>$.selectOpen("editmenu"))},{default:o((()=>l[51]||(l[51]=[n("菜单")]))),_:1}),i(ue,{title:"解除用户",onClick:l[12]||(l[12]=e=>$.selectOpen("removeu"))},{default:o((()=>l[52]||(l[52]=[n("解除用户")]))),_:1})])),_:1})])),_:1}),i(ye,{modelValue:M.selectDialog,"onUpdate:modelValue":l[20]||(l[20]=e=>M.selectDialog=e),title:M.selectTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"20vh"},{footer:o((()=>[i(ue,{onClick:$.selectCancel},{default:o((()=>l[56]||(l[56]=[n("取消")]))),_:1},8,["onClick"]),i(ue,{type:"primary",onClick:$.selectSubmit},{default:o((()=>l[57]||(l[57]=[n("提交")]))),_:1},8,["onClick"])])),default:o((()=>[i(ge,{native:"",height:M.height-200},{default:o((()=>[i(_e,{ref:"selectRef","label-width":"120px"},{default:o((()=>[i(ce,{label:M.name+"ID"},{default:o((()=>[i(G,{modelValue:M.selectIds,"onUpdate:modelValue":l[13]||(l[13]=e=>M.selectIds=e),type:"textarea",autosize:"",disabled:""},null,8,["modelValue"])])),_:1},8,["label"]),"removeu"===M.selectType?(s(),d(ce,{key:0},{default:o((()=>[c("span",K,"确定要解除选中的"+m(M.name)+"的用户吗？",1)])),_:1})):"editmenu"===M.selectType?(s(),d(ce,{key:1,label:"菜单"},{default:o((()=>[i(de,null,{default:o((()=>[i(me,{modelValue:M.menuExpandAll,"onUpdate:modelValue":l[14]||(l[14]=e=>M.menuExpandAll=e),title:"展开/收起",onChange:l[15]||(l[15]=e=>$.menuExpandAllChange("selMenuRef"))},{default:o((()=>l[53]||(l[53]=[n(" 展开 ")]))),_:1},8,["modelValue"]),i(me,{modelValue:M.menuCheckAll,"onUpdate:modelValue":l[16]||(l[16]=e=>M.menuCheckAll=e),title:"全选/反选",onChange:l[17]||(l[17]=e=>$.menuCheckAllChange("selMenuRef"))},{default:o((()=>l[54]||(l[54]=[n(" 全选 ")]))),_:1},8,["modelValue"])])),_:1}),i(pe,{ref:"selMenuRef",data:M.menuData,props:M.menuProps,"default-checked-keys":M.menu_ids,"node-key":"menu_id","show-checkbox":"","check-strictly":"","expand-on-click-node":!1,onCheck:l[18]||(l[18]=l=>e.apiCheck("selMenuRef"))},{default:o((e=>[c("span",N,[c("span",null,m(e.node.label),1),e.data.children?(s(),a("span",Y,[i(me,{title:"全选/反选",onChange:l=>$.menuCheckAllChangePid(e.node,e.data,"selMenuRef")},{default:o((()=>l[55]||(l[55]=[n(" 全选 ")]))),_:2},1032,["onChange"])])):h("",!0),c("span",null,[e.data.api_url?(s(),a("i",{key:0,style:{"margin-left":"10px"},title:e.data.api_url},[i(he,{"icon-class":"link"})],8,z)):(s(),a("i",H,[i(he,{"icon-class":"link"})])),e.data.is_unlogin?(s(),a("i",B,[i(he,{"icon-class":"user"})])):(s(),a("i",F,[i(he,{"icon-class":"user"})])),e.data.is_unauth?(s(),a("i",J,[i(he,{"icon-class":"unlock"})])):(s(),a("i",W,[i(he,{"icon-class":"unlock"})]))])])])),_:1},8,["data","props","default-checked-keys"])])),_:1})):"disable"===M.selectType?(s(),d(ce,{key:2,label:"是否禁用"},{default:o((()=>[i(fe,{modelValue:M.is_disable,"onUpdate:modelValue":l[19]||(l[19]=e=>M.is_disable=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1})):"dele"===M.selectType?(s(),d(ce,{key:3},{default:o((()=>[c("span",X,"确定要删除选中的"+m(M.name)+"吗？",1)])),_:1})):h("",!0)])),_:1},512)])),_:1},8,["height"])])),_:1},8,["modelValue","title"]),p((s(),d(Ce,{ref:"table",data:M.data,height:M.height,onSortChange:$.sort,onSelectionChange:$.select},{default:o((()=>[i(ke,{type:"selection",width:"42",title:"全选/反选"}),i(ke,{prop:M.idkey,label:"ID",width:"80",sortable:"custom"},null,8,["prop"]),i(ke,{prop:"role_name",label:"名称","min-width":"120","show-overflow-tooltip":""}),i(ke,{prop:"role_desc",label:"描述","min-width":"160","show-overflow-tooltip":""}),i(ke,{prop:"remark",label:"备注","min-width":"150","show-overflow-tooltip":""}),i(ke,{prop:"is_disable_name",label:"禁用","min-width":"85",sortable:"custom"}),i(ke,{prop:"sort",label:"排序","min-width":"85",sortable:"custom"}),i(ke,{prop:"create_time",label:"添加时间",width:"165",sortable:"custom"}),i(ke,{prop:"update_time",label:"修改时间",width:"165",sortable:"custom"}),i(ke,{label:"操作",width:"130"},{default:o((e=>[i(be,{type:"primary",class:"mr-1",underline:!1,onClick:l=>$.userShow(e.row)},{default:o((()=>l[58]||(l[58]=[n(" 用户 ")]))),_:2},1032,["onClick"]),i(be,{type:"primary",class:"mr-1",underline:!1,onClick:l=>$.edit(e.row)},{default:o((()=>l[59]||(l[59]=[n(" 修改 ")]))),_:2},1032,["onClick"]),i(be,{type:"primary",underline:!1,onClick:l=>$.selectOpen("dele",[e.row])},{default:o((()=>l[60]||(l[60]=[n(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","height","onSortChange","onSelectionChange"])),[[Ve,M.loading]]),p(i(ve,{total:M.count,"onUpdate:total":l[21]||(l[21]=e=>M.count=e),page:M.query.page,"onUpdate:page":l[22]||(l[22]=e=>M.query.page=e),limit:M.query.limit,"onUpdate:limit":l[23]||(l[23]=e=>M.query.limit=e),onPagination:$.list},null,8,["total","page","limit","onPagination"]),[[f,M.count>0]]),i(ye,{modelValue:M.dialog,"onUpdate:modelValue":l[36]||(l[36]=e=>M.dialog=e),title:M.dialogTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":$.cancel,top:"5vh","destroy-on-close":""},{footer:o((()=>[i(ue,{loading:M.loading,onClick:$.cancel},{default:o((()=>l[64]||(l[64]=[n("取消")]))),_:1},8,["loading","onClick"]),i(ue,{loading:M.loading,type:"primary",onClick:$.submit},{default:o((()=>l[65]||(l[65]=[n("提交")]))),_:1},8,["loading","onClick"])])),default:o((()=>[i(ge,{native:"",height:M.height-30},{default:o((()=>[i(_e,{ref:"ref",rules:M.rules,model:M.model,"label-width":"100px"},{default:o((()=>[i(ce,{label:"名称",prop:"role_name"},{default:o((()=>[i(G,{modelValue:M.model.role_name,"onUpdate:modelValue":l[24]||(l[24]=e=>M.model.role_name=e),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])])),_:1}),i(ce,{label:"描述",prop:"role_desc"},{default:o((()=>[i(G,{modelValue:M.model.role_desc,"onUpdate:modelValue":l[25]||(l[25]=e=>M.model.role_desc=e),type:"textarea",autosize:"",placeholder:"请输入描述"},null,8,["modelValue"])])),_:1}),i(ce,{label:"备注",prop:"remark"},{default:o((()=>[i(G,{modelValue:M.model.remark,"onUpdate:modelValue":l[26]||(l[26]=e=>M.model.remark=e),placeholder:"请输入备注",clearable:""},null,8,["modelValue"])])),_:1}),i(ce,{label:"排序",prop:"sort",placeholder:"250"},{default:o((()=>[i(G,{modelValue:M.model.sort,"onUpdate:modelValue":l[27]||(l[27]=e=>M.model.sort=e),type:"number"},null,8,["modelValue"])])),_:1}),i(ce,{label:"菜单"},{default:o((()=>[i(de,null,{default:o((()=>[i(me,{modelValue:M.menuExpandAll,"onUpdate:modelValue":l[28]||(l[28]=e=>M.menuExpandAll=e),title:"展开/收起",onChange:l[29]||(l[29]=e=>$.menuExpandAllChange("menuRef"))},{default:o((()=>l[61]||(l[61]=[n(" 展开 ")]))),_:1},8,["modelValue"]),i(me,{modelValue:M.menuCheckAll,"onUpdate:modelValue":l[30]||(l[30]=e=>M.menuCheckAll=e),title:"全选/反选",onChange:l[31]||(l[31]=e=>$.menuCheckAllChange("menuRef"))},{default:o((()=>l[62]||(l[62]=[n(" 全选 ")]))),_:1},8,["modelValue"])])),_:1}),i(pe,{ref:"menuRef",data:M.menuData,props:M.menuProps,"default-checked-keys":M.model.menu_ids,"node-key":M.menuIdkey,"expand-on-click-node":!1,"show-checkbox":"","check-strictly":"",onCheck:l[32]||(l[32]=e=>$.menuCheck("menuRef"))},{default:o((e=>[c("span",Z,[c("span",null,m(e.node.label),1),e.data.children?(s(),a("span",ee,[i(me,{title:"全选/反选",onChange:l=>$.menuCheckAllChangePid(e.node,e.data,"menuRef")},{default:o((()=>l[63]||(l[63]=[n(" 全选 ")]))),_:2},1032,["onChange"])])):h("",!0),c("span",null,[e.data.menu_url?(s(),a("i",{key:0,style:{"margin-left":"10px"},title:e.data.menu_url},[i(he,{"icon-class":"link"})],8,le)):(s(),a("i",te,[i(he,{"icon-class":"link"})])),e.data.is_unlogin?(s(),a("i",se,[i(he,{"icon-class":"user"})])):(s(),a("i",ae,[i(he,{"icon-class":"user"})])),e.data.is_unauth?(s(),a("i",ie,[i(he,{"icon-class":"unlock"})])):(s(),a("i",oe,[i(he,{"icon-class":"unlock"})]))])])])),_:1},8,["data","props","default-checked-keys","node-key"])])),_:1}),M.model[M.idkey]?(s(),d(ce,{key:0,label:"添加时间",prop:"create_time"},{default:o((()=>[i(G,{modelValue:M.model.create_time,"onUpdate:modelValue":l[33]||(l[33]=e=>M.model.create_time=e),disabled:""},null,8,["modelValue"])])),_:1})):h("",!0),M.model[M.idkey]?(s(),d(ce,{key:1,label:"修改时间",prop:"update_time"},{default:o((()=>[i(G,{modelValue:M.model.update_time,"onUpdate:modelValue":l[34]||(l[34]=e=>M.model.update_time=e),disabled:""},null,8,["modelValue"])])),_:1})):h("",!0),M.model.delete_time?(s(),d(ce,{key:2,label:"删除时间",prop:"delete_time"},{default:o((()=>[i(G,{modelValue:M.model.delete_time,"onUpdate:modelValue":l[35]||(l[35]=e=>M.model.delete_time=e),disabled:""},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1},8,["rules","model"])])),_:1},8,["height"])])),_:1},8,["modelValue","title","before-close"]),i(ye,{modelValue:M.userDialog,"onUpdate:modelValue":l[43]||(l[43]=e=>M.userDialog=e),title:M.userDialogTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"5vh",width:"65%"},{default:o((()=>[i(ne,null,{default:o((()=>[i(de,null,{default:o((()=>[i(ue,{type:"primary",title:"解除",onClick:l[37]||(l[37]=e=>$.userSelectOpen("userRemove"))},{default:o((()=>l[66]||(l[66]=[n(" 解除 ")]))),_:1}),i(G,{modelValue:M.userQuery.search_value,"onUpdate:modelValue":l[38]||(l[38]=e=>M.userQuery.search_value=e),class:"ya-search-value",placeholder:"昵称",clearable:""},null,8,["modelValue"]),i(ue,{type:"primary",onClick:l[39]||(l[39]=e=>$.userList())},{default:o((()=>l[67]||(l[67]=[n("查询")]))),_:1})])),_:1})])),_:1}),p((s(),d(Ce,{ref:"userRef",data:M.userData,height:M.height-50,onSortChange:$.userSort,onSelectionChange:$.userSelect},{default:o((()=>[i(ke,{type:"selection",width:"42",title:"全选/反选"}),i(ke,{prop:"user_id",label:"用户ID",width:"100",sortable:"custom"}),i(ke,{prop:"nickname",label:"昵称","min-width":"130","show-overflow-tooltip":""}),i(ke,{prop:"username",label:"账号","min-width":"130","show-overflow-tooltip":""}),i(ke,{prop:"role_names",label:"角色","min-width":"130","show-overflow-tooltip":""}),i(ke,{prop:"remark",label:"备注","min-width":"100","show-overflow-tooltip":""}),i(ke,{prop:"is_super_name",label:"超管","min-width":"80",sortable:"custom"}),i(ke,{prop:"is_disable_name",label:"禁用","min-width":"80",sortable:"custom"}),i(ke,{label:"操作",width:"70"},{default:o((e=>[i(be,{type:"primary",underline:!1,onClick:l=>$.userSelectOpen("userRemove",e.row)},{default:o((()=>l[68]||(l[68]=[n(" 解除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","height","onSortChange","onSelectionChange"])),[[Ve,M.userLoad]]),p(i(ve,{total:M.userCount,"onUpdate:total":l[40]||(l[40]=e=>M.userCount=e),page:M.userQuery.page,"onUpdate:page":l[41]||(l[41]=e=>M.userQuery.page=e),limit:M.userQuery.limit,"onUpdate:limit":l[42]||(l[42]=e=>M.userQuery.limit=e),onPagination:$.userList},null,8,["total","page","limit","onPagination"]),[[f,M.userCount>0]])])),_:1},8,["modelValue","title"]),i(ye,{modelValue:M.userSelectDialog,"onUpdate:modelValue":l[45]||(l[45]=e=>M.userSelectDialog=e),title:M.userSelectTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"20vh"},{footer:o((()=>[i(ue,{onClick:$.userSelectCancel},{default:o((()=>l[69]||(l[69]=[n("取消")]))),_:1},8,["onClick"]),i(ue,{type:"primary",onClick:$.userSelectSubmit},{default:o((()=>l[70]||(l[70]=[n("提交")]))),_:1},8,["onClick"])])),default:o((()=>[i(_e,{ref:"userSelectRef","label-width":"120px"},{default:o((()=>["userRemove"===M.userSelectType?(s(),d(ce,{key:0,label:M.name+"ID"},{default:o((()=>[c("span",null,m(M.userQuery[M.idkey]),1)])),_:1},8,["label"])):h("",!0),i(ce,{label:M.userName+"ID"},{default:o((()=>[i(G,{modelValue:M.userSelectIds,"onUpdate:modelValue":l[44]||(l[44]=e=>M.userSelectIds=e),type:"textarea",autosize:"",disabled:""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},512)])),_:1},8,["modelValue","title"])])}]]);export{re as default};
